- content_for :title do
  = "#{@category.name.capitalize} Category - ImageGallery"

%main.main
  / Page Title
  .page-title{"data-aos" => "fade"}
    .heading
      .container
        .row.d-flex.justify-content-center.text-center
          .col-lg-8
            %h1= @category.name.capitalize + " Gallery"
            %p.mb-3= "Explore beautiful #{@category.name.downcase} images from our community."
            .d-flex.justify-content-center.align-items-center.gap-3.mb-3
              = render 'subscription', category: @category
              - if user_signed_in?
                = link_to new_post_path, class: "btn btn-primary" do
                  %i.bi.bi-plus-circle.me-2
                  Add New Post
    %nav.breadcrumbs
      .container
        %ol
          %li
            = link_to "Home", root_path
          %li
            = link_to "Categories", categories_path
          %li.current= @category.name.capitalize

  / Gallery Section
  %section#gallery.gallery.section
    .container-fluid{"data-aos" => "fade-up", "data-aos-delay" => "100"}
      .row.gy-4.justify-content-center
        - if @posts_with_images.any?
          - @posts_with_images.each_with_index do |post, index|
            .col-xl-3.col-lg-4.col-md-6
              .gallery-item.h-100
                .position-relative
                  %img.img-fluid{alt: post.title, src: post.image.url}
                  .gallery-links.d-flex.align-items-center.justify-content-center
                    %a.glightbox.preview-link{href: post.image.url, title: post.title}
                      %i.bi.bi-arrows-angle-expand
                    = link_to post_path(post), class: "details-link" do
                      %i.bi.bi-link-45deg
                .gallery-info.p-2
                  %h6.mb-1= post.title
                  %small.text-muted
                    by
                    = link_to post.user.name || post.user.email, user_path(post.user)
                    = time_ago_in_words(post.created_at)
                    ago
        - else
          .col-12.text-center
            .alert.alert-info
              %h4 No images in this category yet
              %p Be the first to add an image to the #{@category.name.downcase} category!
              - if user_signed_in?
                = link_to new_post_path, class: "btn btn-primary btn-lg" do
                  %i.bi.bi-plus-circle.me-2
                  Add First Image